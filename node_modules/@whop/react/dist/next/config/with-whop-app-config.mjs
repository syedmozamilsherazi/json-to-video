export function withWhopAppConfig(next, whopAppOptions = {}) {
    return async function applyWhopAppConfig(phase, defaults) {
        const resolvedConfig = typeof next === "function" ? await next(phase, defaults) : next;
        resolvedConfig.experimental ??= {};
        resolvedConfig.experimental.serverActions ??= {};
        resolvedConfig.experimental.serverActions.allowedOrigins ??= [];
        resolvedConfig.experimental.serverActions.allowedOrigins.push(`${whopAppOptions.domainId ?? "*"}.apps.whop.com`);
        resolvedConfig.experimental.optimizePackageImports ??= [];
        resolvedConfig.experimental.optimizePackageImports.push("frosted-ui");
        return resolvedConfig;
    };
}
