"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useBroadcastWebsocketMessage", {
    enumerable: true,
    get: function() {
        return useBroadcastWebsocketMessage;
    }
});
const _react = require("react");
const _usewebsocket = require("./use-websocket");
function useBroadcastWebsocketMessage() {
    const websocket = (0, _usewebsocket.useWebsocket)();
    const queue = (0, _react.useRef)([]);
    (0, _react.useEffect)(()=>{
        if (websocket.status === "connected") {
            for (const message of queue.current){
                websocket.websocket.broadcast(message);
            }
            queue.current = [];
        }
    }, [
        websocket
    ]);
    return (message)=>{
        if (websocket.status !== "connected") {
            queue.current.push(message);
        } else {
            websocket.websocket.broadcast(message);
        }
    };
}
