'use client';
import { composeEventHandlers } from '@radix-ui/primitive';
import classNames from 'classnames';
import * as React from 'react';
import { textFieldPropDefs, textFieldSlotPropDefs } from './text-field.props';
const TextFieldContext = React.createContext(undefined);
const TextFieldRoot = (props) => {
    const { children, className, size = textFieldPropDefs.size.default, variant = textFieldPropDefs.variant.default, color = textFieldPropDefs.color.default, ...rootProps } = props;
    return (React.createElement("div", { ...rootProps, className: classNames('fui-TextFieldRoot', className), onPointerDown: composeEventHandlers(rootProps.onPointerDown, (event) => {
            const target = event.target;
            if (target.closest('input, button, a'))
                return;
            const input = event.currentTarget.querySelector('.fui-TextFieldInput');
            if (!input)
                return;
            const position = input.compareDocumentPosition(target);
            const targetIsBeforeInput = (position & Node.DOCUMENT_POSITION_PRECEDING) !== 0;
            const cursorPosition = targetIsBeforeInput ? 0 : input.value.length;
            requestAnimationFrame(() => {
                input.setSelectionRange(cursorPosition, cursorPosition);
                input.focus();
            });
        }) },
        React.createElement(TextFieldContext.Provider, { value: { size, variant, color } }, children)));
};
TextFieldRoot.displayName = 'TextFieldRoot';
const TextFieldSlot = React.forwardRef((props, forwardedRef) => {
    const { className, color = textFieldSlotPropDefs.color.default, ...slotProps } = props;
    const context = React.useContext(TextFieldContext);
    return (React.createElement("div", { "data-accent-color": color, ...slotProps, ref: forwardedRef, className: classNames('fui-TextFieldSlot', className, `fui-r-size-${context === null || context === void 0 ? void 0 : context.size}`) }));
});
TextFieldSlot.displayName = 'TextFieldSlot';
const TextFieldInput = React.forwardRef((props, forwardedRef) => {
    var _a, _b, _c;
    const context = React.useContext(TextFieldContext);
    const hasRoot = context !== undefined;
    const { className, size = (_a = context === null || context === void 0 ? void 0 : context.size) !== null && _a !== void 0 ? _a : textFieldPropDefs.size.default, variant = (_b = context === null || context === void 0 ? void 0 : context.variant) !== null && _b !== void 0 ? _b : textFieldPropDefs.variant.default, color = (_c = context === null || context === void 0 ? void 0 : context.color) !== null && _c !== void 0 ? _c : textFieldPropDefs.color.default, ...inputProps } = props;
    const input = (React.createElement(React.Fragment, null,
        React.createElement("input", { "data-accent-color": color, spellCheck: "false", ...inputProps, ref: forwardedRef, className: classNames('fui-TextFieldInput', className, `fui-r-size-${size}`, `fui-variant-${variant}`) }),
        React.createElement("div", { "data-accent-color": color, className: "fui-TextFieldChrome" })));
    return hasRoot ? (input) : (React.createElement(TextFieldRoot, { size: size, variant: variant, color: color }, input));
});
TextFieldInput.displayName = 'TextFieldInput';
export { TextFieldInput as Input, TextFieldRoot as Root, TextFieldSlot as Slot };
//# sourceMappingURL=text-field.js.map